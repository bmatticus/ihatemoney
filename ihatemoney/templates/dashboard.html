{% extends "layout.html" %}
{% block content %}
{% if is_admin_dashboard_activated %}
<table id="bill_table" class="table table-striped">
    <thead><tr><th>{{ _("Project") }}</th><th>{{ _("Number of members") }}</th><th>{{ _("Number of bills") }}</th><th>{{_("Newest bill")}}</th><th>{{_("Oldest bill")}}</th><th>{{_("Actions")}}</th></tr></thead>
    <tbody></tbody>
</table>
<script language="JavaScript">
$(document).ready(function () {
    var table = $('#bill_table').DataTable({
        "processing": true,
        "serverSide": true,
        "ajax": "{{ url_for('main.dashboard_datatables_data') }}",
        "columnDefs": [{
            "targets": 0,
            "data": null,
            "render": function (data, type, row, meta) {
            var contents =  "<a class='btn btn-secondary' href='{{ url_for('.list_bills', project_id='project_id_ph') }}'>" + data[0] + "</a>";
            return contents.replace(/project_id_ph/g, data[0]);
        }
        }, {
            "targets": -1,
            "data": null,
            "className": "project-actions",
            "render": function (data, type, row, meta) {
                var contents = '<a class=\'edit\' href="{{ url_for(".edit_project", project_id="project_id_ph") }}" title="{{ _("edit") }}">{{ _("edit") }}</a><a class="delete" href="{{ url_for(".delete_project", project_id="project_id_ph") }}" title="{{ _("delete") }}">{{ _("delete") }}</a>';
        return contents.replace(/project_id_ph/g, data[0]);
            }
        }]
    });
});
</script>
{% else %}
<div class="alert alert-danger">{{ _("The Dashboard is currently deactivated.") }}</div>
{% endif %}
{% endblock %}
